Below is a comprehensive audit of the changes. References use fully-qualified paths and line ranges where applicable, based on the current repository state. A typecheck was attempted and failed due to missing dependencies (details in Testing).

Overview
Intraday strategy count increased from 9 → 11 via new Smart Money Concepts (SMC) strategies and supporting modules.

New ATR percentile regime detector introduced.

Killzone/session bonuses expanded; ADX weak-trend gate lowered.

Redundant ADX checks removed in two strategies.

File-by-file breakdown
New Smart Money Concepts module
src/modules/smartMoney/types.ts
Defines canonical SMC data structures: Bar, OrderBlock, FairValueGap, LiquidityZone, LiquiditySweep, MarketStructurePoint, StructureBreak (lines 1-68). Provides strong typing for downstream strategy integration.

src/modules/smartMoney/orderBlocks.ts
Implements order-block detection: ATR-based impulse sizing, last-opposing-candle search, mitigation check, returns unmitigated blocks only (lines ~1-178). Default config uses minImpulse 2 ATR, 50-bar lookback, 100-bar age cap.

src/modules/smartMoney/fairValueGaps.ts
Detects 3-candle FVGs with minimum gap-size percent, computes fill status/percent, filters filled gaps (lines ~1-160). Includes nearest-FVG lookup helper.

src/modules/smartMoney/liquiditySweep.ts
End-to-end liquidity sweep toolkit: swing point detection, liquidity zone clustering with tolerance and touch counts, sweep detection with reversal bar, BOS/CHOCH structure breaks, recent-sweep helper (lines ~1-210). Supports regime-aware sweep retrieval (long/short) within age window.

src/modules/smartMoney/index.ts
Barrel export for the SMC submodules.

Impact:
Adds institutional-pattern primitives (order blocks, FVGs, sweeps/structure) enabling SMC-driven strategies. Logic is self-contained and typed; mitigation/fill filtering reduces stale zones.

Regime detection
src/modules/regimeDetector.ts
ATR-percentile classifier with adaptive RR/stop multipliers and regime advisories; thresholds configurable (default compression ≤25th pct, expansion ≥75th pct). Provides helpers to adjust RR/stop by strategy archetype and to gate trading permissiveness (lines ~1-150).

Impact:
Introduces volatility-aware sizing and gating knobs for strategies; currently not yet wired into the SignalQualityGate but available for integration.

New strategies
src/strategies/intraday/MultiOscillatorMomentum.ts
Replaces prior CCI focus with RSI(50 cross from extremes), MACD histogram flip, and Stochastic crossover; requires 2/3 confirmations. Builds confidence from confluence, trend alignment, RR≥2, rejection, etc. Uses H4 trend via preflight; minBars 100 (lines ~1-200). Takes stops at local swing ±0.3 ATR, targets 2.0 RR with structure preference.

src/strategies/intraday/LiquiditySweep.ts
Implements ICT-style sweep reversal: finds recent sweeps (≤3 bars) using SMC module; requires reversal candle; targets opposing liquidity zone if available else 2.5 RR. Integrates H4 trend adjustments but allows counter-trend with penalty; stop at sweep extreme ±0.3 ATR (lines ~1-190).

Impact:
Adds two SMC-aware intraday entries, increasing strategy roster to 11. LiquiditySweep leverages new SMC detectors; MultiOscillatorMomentum provides diversified momentum signals.

Signal quality & gating updates
src/strategies/SignalQualityGate.ts

ADX weak-trend threshold lowered from 18→14 in regime detection; range now ADX<14.

Killzone/session adjustments: London +15, London/NY overlap +20, NY open window covered; FX Asian session penalty -15; other instrument-class handling unchanged (lines ~260-360).

Regime gating text updated accordingly.

Impact:
Higher pass-through for developing trends (ADX 14–18). Session bonuses raise confidence during high-liquidity windows; potential increase in signal volume during London/overlap.

Redundant ADX removal
src/strategies/intraday/WilliamsEma.ts
Removed local ADX gate in favor of SignalQualityGate’s regime handling (comments and logic near lines ~70-85).

src/strategies/intraday/EmaPullback.ts
Same removal; relies on preflight ADX/regime (lines ~55-90).

Impact:
Avoids double-filtering; centralizes ADX gating, enabling more valid signals in weak-trend conditions.

Strategy registry
src/strategies/registry.ts
Added imports/registrations for multi-oscillator-momentum and liquidity-sweep; metadata updated to list 11 intraday strategies with win rate/RR/timeframes (lines ~1-160).

Impact:
Exposes new strategies to engine lookup and UI/API layers consuming registry metadata.

Data pipeline integrity
Inputs/typing: New SMC modules accept standardized Bar shape {timestamp, open, high, low, close, volume}; consistent with strategy bars. No mutation of input arrays; derived artifacts (zones, gaps) are returned immutably.

Transform correctness:

Order blocks: ATR-based impulse measure uses adjacent closes; mitigation removes already-filled blocks—prevents stale zones.

FVGs: Gap size computed from candle 1 vs 3; midpoint fill checked per bar; filled gaps filtered out.

Liquidity sweeps: Swing clustering with tolerance buckets; sweep requires pierce + reversal close beyond level; captures magnitude and ties back to originating zone. BOS/CHOCH uses prior swing extremes and ADX-aware trend detection heuristic.

Strategy integration: LiquiditySweep converts engine bars to SMC bars, pulls recent sweeps, and targets opposing liquidity. Confidence composed from sweep strength, touch count, rejection, trend, RR. MultiOscillatorMomentum composes oscillator triggers with trend/ATR/structure risk params.

Session/regime gating: Centralized in SignalQualityGate; ADX thresholds adjusted; session bonuses applied before strategies compute confidence.

Gaps/risks:

ATR percentile regime detector is not yet invoked by SignalQualityGate or strategies; no adaptive sizing currently in live path.

Liquidity sweep detection iterates recent bars (bars.length - 10 onward); sweeps may be missed if older than that range; configurable?

No explicit debounce of overlapping zones; grouping tolerance uses rounded price—verify tolerance sizing for varied instrument decimals.

Improvement opportunities
Integrate regime detector (src/modules/regimeDetector.ts) into SignalQualityGate or strategies to adapt RR/stop and allow/deny based on volatility percentile.

Type safety on indicators: Some strategies assume indicator array length ≥ bars; consider guards or aligning indices to avoid undefined in sparse feeds.

LiquiditySweep target selection: Opposing zone selection uses findLiquidityZones on full history; consider filtering by recency/strength and ensuring RR floor before execution.

Mitigation handling exposure: findOrderBlocks returns only unmitigated blocks; if consumers need historical mitigated blocks for context, expose an option to include mitigated results.

Config surface: Expose SMC config (lookbacks, touch tolerances, gap % thresholds) via settings to tune per instrument class.

Testing gap: npm run typecheck fails due to missing modules in src/engine/cryptoIndicatorService.ts (see Testing). Resolve dependency or adjust tsconfig path mapping.

Security & compliance
No dynamic code execution or unsafe eval introduced.

Pure computational modules; no new I/O or network calls added.

Uses typed interfaces and bounds checks; avoids mutating inputs.

Session logic depends on system clock; ensure server clock is trusted to prevent timing-based gating bypass.

Testing
❌ npm run typecheck — failed: missing modules ../services/alphaVantageClient.js and ../services/kucoinClient.js in src/engine/cryptoIndicatorService.ts (prerequisite to clean typecheck).

Summary of confirmed scope
New files (8): src/modules/smartMoney/{types.ts,orderBlocks.ts,fairValueGaps.ts,liquiditySweep.ts,index.ts}, src/modules/regimeDetector.ts, src/strategies/intraday/{MultiOscillatorMomentum.ts,LiquiditySweep.ts}.

Modified files (4): src/strategies/SignalQualityGate.ts, src/strategies/intraday/{WilliamsEma.ts,EmaPullback.ts}, src/strategies/registry.ts.

If you want, I can wire the ATR regime detector into SignalQualityGate and clean up the typecheck errors by stubbing or adding the missing service modules.